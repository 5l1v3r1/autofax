<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Mon Dec  5 21:34:55 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>man</title>

</head>
<body>

<h1 align="center">AUTOFAX (Version 0.41568) - deutsch<a name="deutsch_D"></a></h1>

<a href="#NAME_D">NAME</a><br>
<a href="#SYNOPSIS_D">SYNOPSIS</a><br>
<a href="#KURZBESCHREIBUNG_D">KURZBESCHREIBUNG</a><br>
<a href="#INSTALLATION_D">INSTALLATION</a><br>
<a href="#GEBRAUCH_D">GEBRAUCH</a><br>
<a href="#OPTIONEN_D">OPTIONEN</a><br>
<a href="#FUNKTIONSWEISE_D">FUNKTIONSWEISE</a><br>
<a href="#VORAUSSETZUNGEN_D">VORAUSSETZUNGEN</a><br>
<a href="#AUSWIRKUNGEN_D">AUSWIRKUNGEN</a><br>
<a href="#FEHLER_D">FEHLER</a><br>
<a href="#HAFTUNG_D">HAFTUNG</a><br>
<a href="#AUTOR_D">AUTOR</a><br>

<hr>


<h2>NAME
<a name="NAME_D"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>autofax</b>
&minus; FaxServer-Funktionalit&auml;t: veranlasst
automatischen Faxversand von Dateien, Benennung empfangener
Faxe und Protokollierung aller Faxe in einer Datenbank <br>
(manpage available in english: &rsquo;man autofax&rsquo; or
&rsquo;man -Len autofax&rsquo;)</p>

<h2>SYNOPSIS
<a name="SYNOPSIS_D"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p style="margin-top: 1em"><b>autofax</b></p></td>
<td width="1%"></td>
<td width="77%">


<p style="margin-top: 1em">[<b>&minus;v|--verbose</b>]
[<b>&minus;l|--log</b>] [<b>&minus;ldn|--logdateineu</b>]
[<b>&minus;kd|--konfdat&nbsp;</b><i>&lt;string&gt;</i>]
[<b>&minus;sqlv|--sql-verbose</b>]
[<b>&minus;rf|--rueckfragen</b>]
[<b>&minus;norf|--keinerueckfragen</b>]
[<b>&minus;loef|--loeschefax</b>]
[<b>&minus;loew|--loeschewaise</b>]
[<b>&minus;loea|--loescheallew</b>]
[<b>&minus;kez|--korrerfolgszeichen</b>]
[<b>&minus;bwv|--bereinigewv</b>] [<b>&minus;st|--stop</b>]
[<b>&minus;lista|--listarchiv</b>]
[<b>&minus;listf|--listfailed</b>]
[<b>&minus;listi|--listinca</b>]
[<b>&minus;listw|--listwart</b>]
[<b>&minus;s|--suche&nbsp;</b><i>&lt;string&gt;</i>]
[<b>&minus;n|--dszahl&nbsp;</b><i>&lt;zahl&gt;</i>]
[<b>&minus;info|--version</b>] [<b>&minus;vi|--vi</b>]
[<b>&minus;h|-help|-?|-hilfe</b>]
[<b>&minus;lg|--language&nbsp;</b><i>&lt;d|e&gt;</i>]
[<b>&minus;lvz|--logvz&nbsp;</b><i>&lt;pfad&gt;</i>]
[<b>&minus;ld|--logdname&nbsp;</b><i>&lt;string&gt;</i>]
[<b>&minus;zvz|--zufaxenvz&nbsp;</b><i>&lt;pfad&gt;</i>]
[<b>&minus;wvz|--wartevz&nbsp;</b><i>&lt;pfad&gt;</i>]
[<b>&minus;nvz|--nichtgefaxtvz&nbsp;</b><i>&lt;pfad&gt;</i>]
[<b>&minus;evz|--empfvz&nbsp;</b><i>&lt;pfad&gt;</i>]
[<b>&minus;cm|--cronminut&nbsp;</b><i>&lt;zahl&gt;</i>]
[<b>&minus;capi|--obcapi</b>] [<b>&minus;hyla|--obhyla</b>]
[<b>&minus;cz|--capizuerst</b>]
[<b>&minus;hz|--hylazuerst</b>]
[<b>&minus;mod|--hmodem&nbsp;</b><i>&lt;string&gt;</i>]
[<b>&minus;mc|--maxcapiv&nbsp;</b><i>&lt;zahl&gt;</i>]
[<b>&minus;mh|--maxhylav&nbsp;</b><i>&lt;zahl&gt;</i>]
[<b>&minus;cuser|--cuser&nbsp;</b><i>&lt;string&gt;</i>]
[<b>&minus;ckzl|--capiklingelzahl&nbsp;</b><i>&lt;zahl&gt;</i>]
[<b>&minus;hkzl|--hylaklingelzahl&nbsp;</b><i>&lt;zahl&gt;</i>]
[<b>&minus;md|--maxdials&nbsp;</b><i>&lt;zahl&gt;</i>]
[<b>&minus;gz|--gleichziel</b>] [<b>&minus;ocri|--ocri</b>]
[<b>&minus;ocra|--ocra</b>]
[<b>&minus;afs|--anfaxstr&nbsp;</b><i>&lt;string&gt;</i>]
[<b>&minus;acfs|--ancfaxstr&nbsp;</b><i>&lt;string&gt;</i>]
[<b>&minus;ahfs|--anhfaxstr&nbsp;</b><i>&lt;string&gt;</i>]
[<b>&minus;as|--anstr&nbsp;</b><i>&lt;string&gt;</i>]
[<b>&minus;us|--undstr&nbsp;</b><i>&lt;string&gt;</i>]
[<b>&minus;host|--host&nbsp;</b><i>&lt;string&gt;</i>]
[<b>&minus;muser|--muser&nbsp;</b><i>&lt;string&gt;</i>]
[<b>&minus;mpwd|--mpwd&nbsp;</b><i>&lt;string&gt;</i>]
[<b>&minus;db|--datenbank&nbsp;</b><i>&lt;string&gt;</i>]</p> </td></tr>
</table>

<h2>KURZBESCHREIBUNG
<a name="KURZBESCHREIBUNG_D"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">autofax ist ein
Befehlszeilenprogramm, mit dem Dateien in einem bestimmten
Verzeichnis automatisch an <b>hylafax</b> (falls ein
linux-kompatibles Fax-Modem angeschlossen ist) und/oder
<b>capisuite</b> (falls eine Fritzcard 2.0 oder 2.1
angeschlossen ist) weiterleitet werden, wenn die Faxnummer
im Dateinamen richtig eingetragen ist, weiterhin die
versandten Faxe in einer MariaDB-Datenbank abspeichert. <br>
Au&szlig;erdem k&ouml;nnen von
<b>hylafax</b>/<b>capisuite</b> empfangene Faxe nach dem
Sender anhand dessen Faxnummer benannt und abgespeichert
werden.</p>

<h2>INSTALLATION
<a name="INSTALLATION_D"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">Zun&auml;chst
lesen Sie bitte die Kapitel &rsquo;Funktionsweise&rsquo;,
&rsquo;Voraussetzungen&rsquo; und
&rsquo;Auswirkungen&rsquo;. Anschlie&szlig;end: - wenn
das Programm &rsquo;git&rsquo; zur Verfuegung steht,
k&ouml;nnen Sie beginnen mit: <b><br>
git clone http://github.com/libelle17/autofax && cd
autofax</b> <br>
- ansonsten z.B. (falls &rsquo;wget&rsquo; installiert ist,
was meist der Fall ist) mit (am besten markieren und an die
Kommandozeile kopieren): <b><br>
P=autofax; T=$P.tar.gz; cd ~; wget
https://github.com/libelle17/$P/archive/master.tar.gz -O $T
&& tar xpvf $T && rm -f $T && { for
i in $(ls -d ${P}_* 2&gt;/dev/null | cut -d&quot;_&quot; -f2
| sort -nr); do j=$((i+1)); case $i in
&quot;&quot;|*[!0-9]*);; *) mv ${P}_$i ${P}_$j; esac; done;
test -e $P && mv $P ${P}_1; mv $P-master $P
&& cd $P; }</b> <br>
Wenn das Programm (gnu) &rsquo;make&rsquo; nicht zur
Verf&uuml;gung steht, k&ouml;nnen Sie dort
&rsquo;./install.sh&rsquo; aufrufen, damit sollte
&rsquo;make&rsquo; installiert werden; anderenfalls
k&ouml;nnen Sie auch aufrufen: <br>
- falls Sie vor Kompilierung die Aktualit&auml;t von
gcc6 sicherstellen lassen wollen oder m&uuml;ssen:
<b><br>
make</b> oder zur Laufzeitoptimierung <b>make optfast</b>
oder zur Groessenoptimierung <b>make opts</b> <br>
- ansonsten: <b><br>
make glei</b> <br>
dann weiter: <b><br>
sudo make install</b> <br>
Zuletzt rufen Sie auf: <b><br>
autofax</b> <br>
(einige Rueckfragen des Programms beantworten) <br>
Der erste Programmaufruf und die erste Faxverarbeitung
k&ouml;nnen jeweils etwas dauern und ein paar Eingaben
erfordern. <br>
Voraussetzungen s.u.</p>

<h2>GEBRAUCH
<a name="GEBRAUCH_D"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Im Idealfall
sollte sich das Programm nach einmaligem Aufruf (s.o.) so
eingerichtet haben, dass es von selbst weiter
l&auml;uft. <br>
Es existiert dann ein Verzeichnis z.B.
&rsquo;<b>zufaxen</b>&rsquo;, in das z.B. Benutzer im
Netzwerk (z.B. &uuml;ber eine Samba-Freigabe) zu faxende
Dateien stellen k&ouml;nnen wie z.B. <br>
&quot;<b>Arztbericht zu Franz Krank an Dr. Gesund und Franz
Krank an Fax 099 987654321 und 088 887654321.doc</b>&quot;
(es k&ouml;nnte auch z.B. eine *.xls, eine *.jpg, eine
*.tif, eine *.txt oder eine *.pdf-Datei sein; die Passage
&rsquo;an Dr. Gesund und Franz Krank &rsquo; ist optional
f&uuml;r die sp&auml;tere Zordnung der Faxnummer(n)
in der Datenbank, sie darf auch fehlen). <br>
Wenn <b>autofax</b> beim n&auml;chsten Mal automatisch
aufgerufen wird (standardm&auml;&szlig;ig alle 2
Minuten), wird die o.g. Beispieldatei zun&auml;chst
kopiert und umbenannt in <br>
&quot;<b>Arztbericht zu Franz Krank an Dr. Gesund an Fax 099
987654321.doc</b>&quot; und <br>
&quot;<b>Arztbericht zu Franz Krank an Franz Krank an Fax
088 887654321.doc</b>&quot; und in die PDF-Dateien <br>
&quot;<b>Arztbericht zu Franz Krank an Dr. Gesund an Fax 099
987654321.pdf</b>&quot; und <br>
&quot;<b>Arztbericht zu Franz Krank an Franz Krank an Fax
088 887654321.pdf</b>&quot; umgewandelt. <br>
Diese werden dann automatisch an <b>hylafax</b> oder
<b>Capisuite</b> weitergeleitet und von dort aus verschickt.
<br>
Gleichzeitig werden sie aus &rsquo;<b>zufaxen</b>&rsquo; in
das Warteverzeichnis, z.B. &rsquo;<b>warteauffax</b>&rsquo;
verschoben und in die Spooltabelle <b>spooltab</b>
eingetragen. <br>
Bei jedem Aufruf &uuml;berpr&uuml;ft autofax den
Status von <b>hylafax</b> und/oder <b>Capisuite</b>. Der
Abschluss des Faxvorgangs dort hat zur Folge, dass autofax
die Quelldateien (also hier die o.g. .doc- und .pdf-Dateien)
aus dem Warteverzeichnis in ein oder mehrere alternative
Archivverzeichnisse oder ein Verzeichnis f&uuml;r
gescheiteterte Faxe ablegt und den Datenbankeintrag von
&rsquo;<b>spooltab</b>&rsquo; in die Archivtabelle
&rsquo;<b>outa</b>&rsquo; verschiebt. <br>
Weiterhin werden &uuml;ber <b>hylafax</b> oder
<b>Capisuite</b> angekommene Faxe in ein Empfangsverzeichnis
kopiert und ggf. nach dem Sender benannt. Hierzu werden,
falls angegeben, konfigurierbare SQL-Befehle verwendet, die
in frei festlegbarer Zahl der Reihe nach so lange aufgerufen
werden, bis einer einen Datensatz zu der Faxnummer findet.
<br>
Der Benutzer k&ouml;nnte also je nach Betriebssystem,
Zugriffsm&ouml;glichkeit und Pr&auml;ferenz in den
genannten Verzeichnissen, in den Datenbanktabellen oder
durch Aufruf von z.B. &rsquo;<b>autofax&rsquo;,
&rsquo;autofax -lista</b>&rsquo;, &rsquo;<b>autofax
-listf</b>&rsquo; oder &rsquo;<b>autofax -listi</b>&rsquo;
den Stand des Faxens &uuml;berpr&uuml;fen.</p>

<h2>OPTIONEN
<a name="OPTIONEN_D"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Mit
&rsquo;<b>autofax -?</b>&rsquo; werden alle
Befehlszeilenoptionen sichtbar. Einige Optionen (z.B.
SQL-Befehle) k&ouml;nnen nicht &uuml;ber die
Befehlszeile, sondern nur &uuml;ber die
Konfigurationsdatei eingegeben werden, die wiederum direkt
editiert oder auch &uuml;ber &rsquo;<b>autofax
-rf</b>&rsquo; interaktiv gepflegt werden kann. <b><br>
-lg, --language &lt;string&gt;</b>:
language/Sprache/Lingue/Lingua [deutsch,englisch] <b><br>
-v, --verbose</b>: Bildschirmausgabe gespraechiger <b><br>
-l, --log</b>: protokolliert ausfuehrlich in Datei
&rsquo;/var/log/autofax.log&rsquo; (sonst knapper) <b><br>
-lvz, --logvz &lt;pfad&gt;</b>: waehlt als Logverzeichnis
&lt;pfad&gt;, derzeit &rsquo;/var/log&rsquo; <b><br>
-ld, --logdname &lt;string&gt;</b>: logdatei &lt;string&gt;
(im Pfad &rsquo;/var/log&rsquo;) wird verwendet anstatt
&rsquo;autofax.log&rsquo; <b><br>
-ldn, --logdateineu</b>: logdatei vorher loeschen <b><br>
-kd, --konfdat &lt;string&gt;</b>: verwendet
Konfigurationsdatei &lt;string&gt; anstatt
&rsquo;/usr/local/sbin/autofax.conf&rsquo; <b><br>
-zvz, --zufaxenvz &lt;pfad&gt;</b>: faxt die Dateien aus
&lt;pfad&gt; anstatt &rsquo;...&rsquo; <b><br>
-wvz, --wartevz &lt;pfad&gt;</b>: Dateien warten in
&lt;pfad&gt; anstatt &rsquo;...&rsquo; <b><br>
-evz, --empfvz &lt;pfad&gt;</b>: Empfangsverzeichnis fuer
Faxempfang &rsquo;...&rsquo; <b><br>
-cm, --cronminut &lt;zahl&gt;</b>: alle wieviel Minuten soll
autofax ueber crontab aufgerufen werden (0=gar nicht)
&rsquo;2&rsquo; <b><br>
-kc, --keincapi</b>: capisuite nicht verwenden <b><br>
-kh, --keinhyla</b>: hylafax nicht verwenden <b><br>
-cz, --capizuerst</b>: versuche faxe zuerst ueber Capisuite
wegzuschicken <b><br>
-hz, --hylazuerst</b>: versuche faxe zuerst ueber hylafax
wegzuschicken <b><br>
-mod, --modem &lt;string&gt;</b>: Fuer Hylafax verwendetes
Modem &rsquo;&rsquo; <b><br>
-mc, --maxcapinr &lt;zahl&gt;</b>: nach &lt;zahl&gt;
Versuchen Capisuite wird Hylafax versucht, anstatt nach
&rsquo;3&rsquo; <b><br>
-mh, --maxhylanr &lt;zahl&gt;</b>: nach &lt;zahl&gt;
Versuchen Hylafax wird Capisuite versucht, anstatt nach
&rsquo;3&rsquo; <b><br>
-ckzl, --capiklingelzahl &lt;zahl&gt;</b>: Zahl der
Klingeltoene, bis Capisuite den Anruf annimmt, anstatt
&rsquo;1&rsquo; <b><br>
-cuser, --cuser &lt;string&gt;</b>: verwendet fuer Capisuite
den Linux-Benutzer &lt;string&gt; anstatt
&rsquo;schade&rsquo; <b><br>
-hkzl, --hylaklingelzahl &lt;zahl&gt;</b>: Zahl der
Klingeltoene, bis Hylafax den Anruf annimmt, anstatt
&rsquo;2&rsquo; <b><br>
-gz, --gleichziel</b>: Faxe werden auch ohne Faxerfolg ins
Zielverzeichnis kopiert <b><br>
-afs, --anfaxstring &lt;string&gt;</b>: faxnr wird hinter
&lt;string&gt; erwartet statt hinter &rsquo;an Fax&rsquo;
<b><br>
-acfs, --ancfaxstring &lt;string&gt;</b>: faxnr fuer primaer
Capisuite wird hinter &lt;string&gt; erwartet statt hinter
&rsquo;an cFax&rsquo; <b><br>
-ahfs, --anhfaxstring &lt;string&gt;</b>: faxnr fuer primaer
hylafax wird hinter &lt;string&gt; erwartet statt hinter
&rsquo;an hFax&rsquo; <b><br>
-as, --anstring &lt;string&gt;</b>: Adressatenname wird
hinter &lt;string&gt; erwartet statt hinter &rsquo; an
&rsquo; <b><br>
-us, --undstring &lt;string&gt;</b>: Trennstring
&lt;string&gt; fuer mehrere Adressaten/Faxnummern statt
&rsquo;und&rsquo; <b><br>
-host, --host &lt;string&gt;</b>: verwendet die Datenbank
auf Host &lt;string&gt; anstatt auf &rsquo;localhost&rsquo;
<b><br>
-muser, --muser &lt;string&gt;</b>: verwendet fuer
MySQL/MariaDB den Benutzer &lt;string&gt; anstatt
&rsquo;praxis&rsquo; <b><br>
-mpwd, --mpwd &lt;string&gt;</b>: verwendet fuer
MySQL/MariaDB das Passwort &lt;string&gt; anstatt
&rsquo;...&rsquo; <b><br>
-db, --db &lt;string&gt;</b>: verwendet die Datenbank
&lt;string&gt; anstatt &rsquo;...&rsquo; <b><br>
-sqlv, --sql-verbose</b>: Bildschirmausgabe mit SQL-Befehlen
<b><br>
-rf, --rueckfragen</b>: alle Parameter werden abgefragt
(darunter einige hier nicht gezeigte) <b><br>
-loef, --loeschefax</b>: ein Fax nach Rueckfrage loeschen
<b><br>
-loew, --loeschewaise</b>: Eintraege aus &lsquo;spool&lsquo;
loeschen, zu denen keine Datei im Wartevz.und kein Capi-
oder Hylafax nachweisbar ist <b><br>
-loea, --loescheallew</b>: alle wartenden Faxe und
zugehoerige Eintraege aus &lsquo;spool&lsquo; loeschen
<b><br>
-loee, --loescheempf</b>: empfangene Dateien loeschen, die
nicht verarbeitet werden koennen <b><br>
-kez, --korrerfolgszeichen</b>: in der Datenbanktabelle
&lsquo;outa&lsquo; wird das Erfolgszeichen korrigiert
<b><br>
-bwv, --bereinigewv</b>: Dateien aus Warteverzeichnis gegen
&lsquo;outa&lsquo; pruefen und ggf. verschieben <b><br>
-lista, --listarchiv</b>: listet Datensaetze aus
&lsquo;outa&lsquo; mit Erfolgskennzeichen auf <b><br>
-listf, --listfailed</b>: listet Datensaetze aus
&lsquo;outa&lsquo; ohne Erfolgskennzeichen auf <b><br>
-listi, --listinca</b>: listet Datensaetze aus
&lsquo;inca&lsquo; auf <b><br>
-n, --dszahl &lt;zahl&gt;</b>: Zahl der aufzulistenden
Datensaetze = &lt;zahl&gt; statt &rsquo;30&rsquo; <b><br>
-info, --version</b> : Zeigt die Programmversion an <b><br>
-vi, --vi</b> : Konfigurationsdatei editieren <b><br>
-h, --hilfe</b>: Zeigt Hilfe an</p>

<h2>FUNKTIONSWEISE
<a name="FUNKTIONSWEISE_D"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">1) Die aktuelle Hardware wird
&uuml;berpr&uuml;ft:</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">a) mit dem Befehl
&rsquo;<b>lspci | grep -i isdn</b>&rsquo; bez&uuml;glich
einer ISDN-Karte</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">b) mit dem Befehl &rsquo;<b>stty
-F</b>&rsquo; bez&uuml;glich eines Fax-Modems.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">2) Die Fax-Konfigurationsdatei
<b>fax.conf</b> der Capisuite wird eingelesen, falls es sie
gibt</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">3) Weitere Vorgaben aus dem
Programmcode werden zugewiesen, die durch die
autofax-Konfigurationsdatei (siehe 4),
Kommandozeilenargumente oder Antworten auf
R&uuml;ckfragen (siehe 5) &uuml;berdeckt werden
k&ouml;nnen.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">4) Vorgaben werden geladen aus
der Konfigurationsdatei, falls existent
(standardm&auml;&szlig;ig <b>autofax.conf</b> im
selben Verzeichnis wie <b>autofax</b>,
standardm&auml;&szlig;ig
<b>/usr/local/sbin/autofax</b>))</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">5) R&uuml;ckfragen werden
gestellt, falls in der Konfigurationsdatei Werte fehlen oder
falls eine Kommandozeilenoption Interaktivit&auml;t
verlangt.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">6) Das Verzeichnis von
<b>hylafax</b> wird ermittelt (<b>/var/spool/hylafax</b>
oder <b>/var/spool/fax</b>), falls hylafax installiert
ist.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">7) Von Benutzern verwendete
Verzeichnisse f&uuml;r zu verschickende, wartende,
versandte und gescheiterte und empfangene Fax-Dateien werden
&uuml;berpr&uuml;ft und ggf. erstellt. Dabei
k&ouml;nnen in der Konfiguration angegebene
Dateinamensmuster ber&uuml;cksichtigt werden, um
erfolgreich versandte Faxe je nach Dateinamen in
verschiedenen Verzeichnissen zu speichern.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">8) Das Programm tr&auml;gt
sich ggf. in <b>crontab</b> ein, um auf Wunsch in
(einstellbaren) Abst&auml;nden aufgerufen zu werden. Um
dies zu verhindern, kann entweder
&rsquo;<b>cronminut</b>&rsquo; auf <b>0</b> eingestellt
werden oder der bereits erstellte autofax-Eintrag mit
<b>crontab -e</b> mit einem vorangestellten
&rsquo;<b>#</b>&rsquo; auskommentiert werden.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">9) Das Programm
&uuml;berpr&uuml;ft, ob alle benutzerreleventen
Verzeichnisse (s. 7) von Sambafreigaben in
/etc/samba/smb.conf <b>erfasst werden, solche werden
n&ouml;tigenfalls erg&auml;nzt.</b></p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">10) Der Betrieb von MariaDB wird
&uuml;berpr&uuml;ft, ggf. wird es (installiert und)
in Betrieb gesetzt, die Datenbanktabellen <b>spooltab</b>
(f&uuml;r gerade laufende Faxe), <b>outa</b>
(f&uuml;r gesandte und gescheiterte Faxe) und
<b>inca</b> (f&uuml;r angekommene Faxe) werden
&uuml;berpr&uuml;ft und ggf. erstellt oder
erweitert.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">11) Im Fall der entsprechenden
Kommandozeilenoptionen werden Korrekturen bei Dateien im
Warteverzeichnis oder den Protokolltabellen
durchgef&uuml;hrt oder deren Inhalt aufgelistet und das
Programm dann beendet.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">12) Andernfalls werden Dateien
im <b>Zufaxenverzeichnis</b> analysiert. Jede Datei, deren
im Dateinamen enthaltene Faxnummer(n) ermittelbar ist/sind
und die in eine PDF-Datei umwandelbar ist (oder schon so
vorliegt), wird ins Warteverzeichnis verschoben und in
<b>spooltab</b> eingetragen.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">Falls eine Datei mehrere
Faxnummern enth&auml;lt und/oder eine PDF-Umwandlung
n&ouml;tig ist, werden zus&auml;tzliche Dateien
erstellt und die urspr&uuml;ngliche Datei ggf.
umbenannt. Falls n&ouml;tig, k&ouml;nnen die Dateien
zus&auml;tzliche Zifferm nahe ihrem Namensende bekommen,
so dass die Namen mit keinem anderen der unter 7) genannten
Verzeichnisse in Konflikt steht.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">Falls neue Dateien erstellt
wurden, werden die nachfolgenden Verschiebungen und
Protokollierungen mit allen durchgef&uuml;hrt.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">13) Je nach Konfiguration wird
die Funktionsf&auml;higkeit von <b>hylafax</b> und/oder
<b>capisuite</b> &uuml;berpr&uuml;ft und ggf.
versucht herzustellen (falls n&ouml;tig und
m&ouml;glich auch mit Installation dieser Programme;
f&uuml;r eine Fritzcard 2.0 sowie f&uuml;r ein
Faxmodem USR5637 kann auch eine automatische Konfiguration
erfolgen).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">14) Im Fall entsprechender
Kommandozeilenoptionen werden Faxe gel&ouml;scht und das
Programm dann beendet.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">15) Andernfalls werden die unter
12) in <b>spooltab</b> eingetragenen Dateien an
<b>hylafax</b> oder <b>capisuite</b> weitergeleitet und dies
in <b>spooltab</b> protokolliert.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">16) Alle in <b>spooltab</b> als
wartend stehenden Faxe werden in
<b>hylafax</b>/<b>capisuite</b> auf ihren Status
&uuml;berpr&uuml;ft, dieser wird in <b>spooltab</b>
aktualisiert (Zahl der bisherigen Faxversuche).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">Falls sowohl hylafax als auch
capisuite aktiv sind und eine voreingestellte Zahl an
Anwahlversuchen im Programm der ersten Pr&auml;ferenz
dieser beiden erfolglos erreicht ist, wird das Fax auch noch
an das jeweils andere Programm weitergeleiet.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">Falls der Faxvorgang
(erfolgreich oder erfolglos) beendet ist, wird die Datei aus
dem Warteverzeichnis in die Verzeichnisse f&uuml;r
fertige bzw. gescheiterte Faxe verschoben, optional mit
ocrmypdf einer Texterkennung unterzogen, und der
Datenbankeintrag aus <b>spooltab</b> in die Tabelle
<b>outa</b> verschoben.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">Der Status der genannten Faxe
wird angezeigt.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">17) Weitere in der Warteschleife
von hylafax/capisuite befindliche, nicht &uuml;ber
autofax erstellte Faxe werden ggf. angezeigt.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">18) &Uuml;ber
<b>hylafax</b>/<b>capisuite</b> empfangene Faxe werden ggf.
mit Hilfe der Faxnummer anhand voreingestellter SQL-Befehle
nach dem Namen des Absenders benannt und in ein
Empfangsverzeichnis gestellt.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">Solche SQL-Befehle sollen zwei
Ergebnisfelder liefern, deren Inhalt dann, durch ein Komma
getrennt, zur Benennung eines empfangenen Faxes verwendet
werden. Bei der Anwendung des SQL-Befehls wird die
Zeichenfolge &rsquo;&&faxnr&&&rsquo; zur
aktuellen Faxnummer erweitert. Beispiel fuer einen solchen
SQL-Befehl:</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">select concat(haname,&rsquo;,
&rsquo;,ort,&rsquo;, &rsquo;,kvnu) name, zulg, fax1k from
kvaerzte.hae where
concat(if(mid(fax1k,1,1)=&rsquo;0&rsquo;,&rsquo;&rsquo;,&rsquo;08131&rsquo;),
replace(replace(replace(replace(fax1k,&rsquo;
&rsquo;,&rsquo;&rsquo;),&rsquo;-&rsquo;,&rsquo;&rsquo;),&rsquo;/&rsquo;,&rsquo;&rsquo;),&rsquo;&acute;&rsquo;,&rsquo;&rsquo;))
= &rsquo;&&faxnr&&&rsquo;</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">Wenn mehrere SQL-Befehle
angegeben werden, so wird der jeweils naechste angewandt,
wenn einer kein Ergebnis liefert.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">Optional werden die empfangenen
Dateien mit Hilfe von ocrmypdf einer Texterkennung
unterzogen.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">19) Die Konfigurationsdatei
<b>autofax.conf</b> wird ggf. geschrieben.</p></td></tr>
</table>

<h2>VORAUSSETZUNGEN
<a name="VORAUSSETZUNGEN_D"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Das Programm
wurde auf eine Installation von Opensuse 42.1, Debian 8.60,
Ubuntu 16.04, Mint 18 oder Fedora 24 mit den
Standardoptionen abgestimmt. systemctl (systemd) muss
laufen, sudo muss installiert sein (fehlt anfangs bei
Standardinstallation in Debian), der Benutzer muss den
Befehl &rsquo;sudo&rsquo; ausf&uuml;hren d&uuml;rfen
(Mitglied in der Gruppe &rsquo;sudoers&rsquo; sein),
&rsquo;GNU make&rsquo; wird ben&ouml;tigt, was durch
Aufruf von ./install.sh ggf. installiert werden kann.
Weitere ben&ouml;tigte Programm werden falls
m&ouml;glich vom makefile oder von autofax bei Bedarf
selbst mitsamt vorausgesetzter Programme mithilfe von
zypper, apt, dnf oder yum nachstalliert, insbesondere:
<b><br>
makefile:</b> <br>
gcc V.6, g++ V.6, groff, libmysqlclient-dev(el),
libtiff-dev(el) <b><br>
autofax:</b> <br>
boost, boost-devel, capiutils, capisuite, capi4linux,
convert, cron, fcpci-3.10.0, ghostscript, hylafax+,
hylafax+-client, imagemagick, i4l-isdnlog, kernel-source,
libcapi20-2, libcapi20-3, libreoffice-base, libxslt-tools,
linux-headers-$(uname -r), mariadb, ocrmypdf,
policycoreutils, policycoreutils-python-utils, python-devel,
python-setuptools, python3-pip, samba, sendmail, sfftobmp,
soffice, tesseract-ocr, tiff, unpaper. <br>
In Fedora kann die Verwendung von Capisuite die Installation
eines neuen Kernels erfordern und beinhalten. <br>
Wenn Sie eines dieser Programme nicht wollen oder eine
aeltere Version 0.41568</p>

<h2>AUSWIRKUNGEN
<a name="AUSWIRKUNGEN_D"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Das Programm
muss zum ordentlichen Funktionieren folgende
Ma&szlig;nahmen ergreifen:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">1) Installieren von
<b>Hylafax+</b>, falls ein Modem angeschlossen ist und
Hylafax+ nicht installiert ist. Ggf. Konfiguration von
Hylafax+ durch Aufruf von &rsquo;<b>faxsetup
-nointeracitve</b>&rsquo;, durch Editieren der
Konfigurationsdateien <b>config</b> und <b>config.*</b>
(z.B. <b>config.ttyACM0</b>) im
hylafax-Konfigurationsverzeichnis (Vorgabe z.B.:
<b>/var/spool/hylafax/etc/</b>)</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">2) Installieren von
<b>capisuite</b>, falls eine Fritzkarte eingebaut ist und
capisuite nicht installiert ist. Ggf. Bearbeitung der
Konfigurationsdateien <b>/etc/capisuite/capisuite.conf</b>
und <b>/etc/capisuite/fax.conf</b>. Ggf. Bearbeitung des
Python-Scripts f&uuml;r ankommende Faxe (Vorgabe z.B.:
<b>/usr/lib64/capisuite/incoming.py</b>) zur Bestimmung der
Zahl der Klingelt&ouml;ne bis zur Faxannahme, Erstellung
bzw. Bearbeitung der Dateien
&rsquo;<b>/etc/udev/rules.d/46-FKN_isdn_capi.rules</b>&rsquo;,
&rsquo;<b>/etc/modprobe.d/50-blacklist.conf</b>&rsquo;.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">3) Einrichten von Diensten:</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">a) in systemd (im Verzeichnis
/usr/lib/systemd/system oder /lib/systemd/system),
insbesondere:</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em"><b>hylafax-faxq.service</b>,
<b>hylafax-hfaxd.service</b>,
<b>hylafax-faxgetty-....service</b> (z.B.
<b>hylafax-faxgetty-ttyACM0</b>),</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">capisuite.service,</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">b) Verschieben von Diensten aus
dem Verzeichnis /etc/init.d in ein neu eingerichtes
Verzeichnis /etc/ausrangiert: <b>hylafax</b>,
<b>capisuite</b></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">c) falls <b>selinux</b> aktiv
ist (wie standardm&auml;&szlig;ig in fedora), dann
behindert es standardm&auml;&szlig;ig
<b>hylafax-hfaxd</b>; in diesem Fall wird im Hintergrund ein
Modul f&uuml;r selinux eingerichtet, um den Betrieb von
hylafax-hfaxd wieder zu erlauben.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">4) Erstellen einer
Protokolldatei, standardm&auml;&szlig;ig
<b>/var/log/autofax.log</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">5) ggf. Erstellen und
Zugreifbarmachen der bestimmbaren <b>Verzeichnisse</b>
f&uuml;r zu sendende, wartende, abgearbeitete und
empfangene Faxe.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">6) ggf. Erstellen und
Ver&auml;ndern der Konfigurationsdatei autofax.conf in
dem Verzeichnis, in dem auch es selbst steht (Vorgabe:
/usr/local/sbin/autofax).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">7) ggf. Einf&uuml;gen einer
Zeile zum Aufruf des Programms in das crontab (von root)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">8) ggf. Einf&uuml;gen von
Abschnitten f&uuml;r die unter 3) genannten
Verzeichnisse in /etc/samba/smb.conf, ggf.
Einf&uuml;gen/Passwortzuteilen des Programmbenutzers
bzw. (falls root) des f&uuml;r die Capisuite
gew&auml;hlten Benutzers als Samba-Bentzer.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">Falls Suse-Firewall vorhanden,
samba-Server fuer &quot;externe Zone&quot; eintragen.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">9) ggf. Einf&uuml;gen einer
Datenbank f&uuml;r die Faxe in mariadb unter einem
bestimmbaren Namen, Anlage und Ver&auml;nderung mehrerer
Tabellen und einer Prozedur in dieser Datenbank, ggf.
Einf&uuml;gen eines Benutzers mit bestimmbarem Namen in
mariadb zur Datenpflege in diesen Tabellen</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">10) durch entsprechende
Befehlszeilenoptionen von autofax k&ouml;nnen innerhalb
von hylafax und capisuite Faxe gel&ouml;scht werden,
insbesondere:</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">a) in hylafax: durch Aufruf von
&rsquo;faxrm&rsquo;</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">b) in capisuite: durch
L&ouml;schen der Dateien wie
/var/spool/capisuite/users/&lt;user&gt;/sendq/*.txt und
~/*.sff. In capisuite kann auch eine verwaiste Lock-Datei
(/var/spool/capisuite/users/&lt;user&gt;/sendq/*.lock)
gel&ouml;scht werden.</p></td></tr>
</table>

<h2>FEHLER
<a name="FEHLER_D"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Fehler bitte
melden. Bitte auch melden, wenn sich
&Auml;nderungsbedarf durch andere Hard- bzw. Software
ergeben.</p>

<h2>HAFTUNG
<a name="HAFTUNG_D"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Das Programm
wurde mit bester Absicht entwickelt und durch den Autor
getestet. <br>
Trotzdem kann der Autor f&uuml;r keine Sch&auml;den
haften, die durch das Programm entstehen
k&ouml;nnten</p>

<h2>AUTOR
<a name="AUTOR_D"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Gerald Schade
(geraldschade@gmx.de; www.diabdachau.de)</p>
<hr>
</body>
</html>
